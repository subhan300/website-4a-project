// ************** CHAT QUESTIONS **********************

// ************** COMMUNITY SCRIPT **********************

var community_transcript = {
  questionA: [
    'Hey, settle in ğŸ¤—',
    "No agendas. Just my story.",
    'Hit me up or hang out for a bit.'
  ],
  responseA: [
    ["Let's keep chatting!", "B"],
    ["Get in touch âœ‰", "C"]
  ],
  questionB: [
    "Awww. So kind ğŸ˜Š",
    "I used to dabble in psychology, neuroscience and academic writing.",
    "Psychology hacks help make my <a href='#techniques'>copywriting</a> accessible and usable to all people regardless of their age, abilities, or education.",
  ],
  responseB: [
    ["Are you really a former neuroscientist?", "D"],
    ["Meh ğŸ˜‘ Why do I need a copywriter?", "E"]
  ],
  questionC: [
    "Curious? Say hi.",
    "The opportunities are endless âœ‰"
  ],
  questionD: [
    "Yep. I got caught up in academic life, but eventually bailed out.",
    "Now Iâ€™m inspired by fresh ideas, new relationships between brands, people and alternative ways of writing â€“ like screenwriting ğŸ¥"
  ],
  responseD: [
    ["Cool. Let's talk!", "F"],
    ["You write screenplays?", "G"]
  ],
  questionF: [
    "Realize your dreams.",
    " Share your ideas with me ğŸ‘‹ğŸ¼"
  ],
  questionG: [
    "As a visual thinker, composing compelling spatial and verbal images in <a href='#screenplays'>screenplays</a> is one of my favorite forms of writing.",
  ],
  responseG: [
    ["Nice ğŸ‘ğŸ¼ What are your favorite TV shows?", "H"],
    ["Meh ğŸ˜‘ What else can you tell me?", "I"]
  ],
  questionH: [
    "I like searching for hidden gems on Netflix.",
    "Can you recommend any underrated gems?",
    "Give me a buzz âœŒğŸ¼"
  ],
  questionI: [
    "Thereâ€™s a new job in town!",
    "Amazon, PayPal, Dropbox and many other big tech players are looking for UX writers ğŸ¤¯"
  ],
  responseI: [
    ["What is UX writing?", "J"],
    ["Psychology relates to UX writing?", "K"]
  ],
  questionJ: [
    "<a href='#articles'>UX writing</a> breathes life into a product, itâ€™s more than writing buttons and labels on a product interface âŒ¨ï¸"
  ],
  questionK: [
    "A human-centered approach helps UX writers craft content that simplifies and beautifies the overall user experience ğŸ¤³ğŸ¼",
    "<a href='#articles'>UX writing</a> not only represents the voice of an organization, it must also be considerate and helpful for users."
  ],
  questionE: [
    "A strong, effective message can connect your brand to your target group ğŸ‘",
    "Successful copywriters have 3 things in common: they are clear, concise and â€“ most of all â€“ relevant.",
    "Still there?",
    "Rethink your narrative ğŸ—£",
    "Because words wait for no one.",
  ],
  responseE: [
    ["Sweet. I actually need some copy!", "L"],
    ["You live in Sydney, whatâ€™s it like?", "M"]
  ],
  questionL: [
    "Letâ€™s give your brand a sense of <a href='#services'>direction</a>."
  ],
  responseL: [
    ["Your Services don't include what I need.", "P"],
    ["Can you write for my industry?", "Q"]
  ],
  questionP: [
    "Then I will push the boundaries of what is possible to solve your problems, grow your business and challenge communication.",
    "Be part of ingenuity ğŸ¤©</div>"
  ],
  questionQ: [
    "I am driven to constantly learn and improve communication through creativity and tech ğŸ‘©ğŸ½â€ğŸ«",
    "I guarantee every word will be crafted with insight and <a href='#services'>consideration</a>."
  ],
  questionM: [
    "Itâ€™s a crazy community.",
    "Friendships, stories and memories are made every day and night ğŸ»"
  ],
  responseM: [
    ["Awesome! Let's get started.", "N"],
    ["Do you have any reviews?", "O"]
  ],
  questionN: [
    "You're nice, I like you ğŸ™ğŸ¼",
    "We should catch up over a coffee soon.",
    " Let's do it! â˜•ï¸"
  ],
  questionO: [
    "Check out my <a href='#reviews'>gracious clients</a> who thanked me for my incredible commitment ğŸ’"
  ]
}

var corporate_transcript = {
  questionA: [
    'Hello, how are you?',
    "I'm Nathan, the Cortex Copywriter â€“ a former neuroscientist.",
    'Would you like to contact me or continue talking?'
  ],
  responseA: [
    ['Keep chatting!', "B"],
    ["Get in touch!", "C"]
  ],
  questionB: [
    "I'll be quick, I know you're busy ğŸ™‚",
    "The name Cortex comes from my past neuroscience research on visual cortex (noodle-like outer layer of the brain).",
    "I apply my knowledge of human behavior in <a href='#techniques'>psychology-based copywriting</a> that influences audiences by understanding their needs & desires about a product or service.",
  ],
  responseB: [
    ["Are you really a former neuroscientist? ", "D"],
    ["Meh ğŸ˜‘ Why do I need a copywriter?", "E"]
  ],
  questionC: [
    "It's great to meet you, let me know what's on your mind/cortex.",
    "Can't wait to hear about your project ğŸ“</div>"
  ],
  questionD: [
    "Yes. my extensive expertise in human behavior ensures efficient copywriting for your business, product or service.",
    "I also work cross-functionally in conversation design and screenwriting ğŸ“º"
  ],
  responseD: [
    ["Cool. Let's talk!", "F"],
    ["You write screenplays?", "G"]
  ],
  questionF: [
    "Shoot me an email or give me a call and Iâ€™ll get back to you asap.",
    "I promise I wonâ€™t leave you hanging ğŸ’¯"
  ],
  questionG: [
    "Yes. See my <a href='#screenplays'>Samples</a> for awards and poster of my original TV pilot screenplay.",
  ],
  responseG: [
    ["Nice ğŸ‘ğŸ¼ What are your favorite TV shows?", "H"],
    ["Meh ğŸ˜‘ What else can you tell me?", "I"]
  ],
  questionH: [
    "My top 10 shows in alphabetical order are: Breaking Bad, Curb Your Enthusiasm, Death Note, Eastbound & Down, Mad Men, Seinfeld, Star Trek: The Next Generation, The Simpsons, The Sopranos, The Wire.",
    "Get in touch if youâ€™d like help with screenwriting or copywriting.",
    "I reply fast. See for yourself ğŸƒâ€"
  ],
  questionI: [
    "Did you know, during the last few years a new digital trend has emerged called UX writing? ğŸ“±",
    "My background in perceptual psychology and visual neuroscience makes me a good UX writer."
  ],
  responseI: [
    ["What is UX writing?", "J"],
    ["Psychology relates to UX writing?", "K"]
  ],
  questionJ: [
    "User experience (UX) writers craft all the text that guides your interaction with a product interface. Learn more about UX writing and digital copywriting in my <a href='#articles'>Blog</a> ğŸ“„"
  ],
  questionK: [
    "My knowledge of visual perception includes Gestalt psychology theory â€“ how people tend to unify visual elements into groups ğŸ“²",
    "This helps me craft copy as a visual element that best guides users through a product experience â€“ read more in my <a href='#articles'>Blog</a>."
  ],
  questionE: [
    "Glad you asked ğŸ˜€",
    "A professional copywriter composes words that evoke an action from a target audience â€“ the product is called copy.",
    "Copywriting influences an audiences feelings, thoughts and responses regarding a product or service.",
    "Digital copywriters like me focus on online content such as websites, blogs, social media posts and emails ğŸ–¥",
    "UX writers create useful, meaningful text that helps users complete tasks.",
  ],
  responseE: [
    ["Sweet. I actually need some copy!", "L"],
    ["You live in Sydney, whatâ€™s it like?", "M"]
  ],
  questionL: [
    "Check out my <a href='#services'>Services</a> then contact me to discuss your project."
  ],
  responseL: [
    ["Your services don't include what I need.", "P"],
    ["Can you write for my industry?", "Q"]
  ],
  questionP: [
    "Then simply ask if I can provide what you need. I've written everything from lyrics to Facebook Ads.",
    "Let's connect ğŸ¤</div>"
  ],
  questionQ: [
    "Sure. I've written on diverse topics from Bitcoin to baby care ğŸ‘¶ğŸ½",
    "How can I <a href='#services'>help</a> you?"
  ],
  questionM: [
    "Sydney is beautiful and expensive! I was born and raised here. While the beach is cool, I prefer luscious green parks ğŸšµğŸ¾â€",
    "We can discuss your project virtually or in-person, off-site or on-site, over the phone, via e-mail, video chat (Zoom or Skype) or through travel â€“ however you feel most comfortable."
  ],
  responseM: [
    ["Awesome! Let's get started.", "N"],
    ["Do you have any reviews?", "O"]
  ],
  questionN: [
    "What are your precise requirements?",
    "Iâ€™m available for a chat or coffee.",
    "Let's schedule a meeting ğŸ“…"
  ],
  questionO: [
    "Read some <a href='#reviews'>Reviews</a> from my happy clients."
  ]
}

var entertainment_transcript = {
  questionA: [
    'Lost for words? Skies ahead blue!',
    "Sugar is sweet.",
    'My copy is too.'
  ],
  responseA: [
    ['Keep chatting!', "B"],
    ["Get in touch!", "C"]
  ],
  questionB: [
    "Are you ready to",
    "rock out",
    "with your <a href='#techniques'>copy</a> out? ğŸ˜",
  ],
  responseB: [
    ["Are you really a former neuroscientist? ", "D"],
    ["Meh ğŸ˜‘ Why do I need a copywriter?", "E"]
  ],
  questionC: [
    "Inhale. Exhale.",
    "Time for an adventure ğŸ¤ </div>"
  ],
  questionD: [
    "You callin' me a liar? I use serious skills in psychology and neuroscience to write copy that makes people ride emotional currents of desire, need and love.",
    "No, itâ€™s not mind control; just a gift for writing simple, sweet and snappy copy that engages all five senses ğŸ¥°"
  ],
  responseD: [
    ["Cool. Let's talk!", "F"],
    ["You write screenplays?", "G"]
  ],
  questionF: [
    "Party time!",
    "Letâ€™s catch up ğŸ¤™ğŸ¼"
  ],
  questionG: [
    "Almost as good as Tarantino ğŸ˜ With any luck you'll see my award-winning sci-fi TV pilot <a href='#screenplays'>screenplay</a> trending on Netflix soon."
  ],
  responseG: [
    ["Nice ğŸ‘ğŸ¼ What are your favorite TV shows?", "H"],
    ["Meh ğŸ˜‘ What else can you tell me?", "I"]
  ],
  questionH: [
    "Iâ€™d rather share my favorite movies: The Godfather Part II, The Shining, Persona, Memento,",
    "Monty Pythonâ€™s Life of Brian, Solaris, Ghost in the Shell (anime), Seven Samurai, Minority Report,",
    "Taxi Driver â€“ â€œYou talkin' to me?â€ ğŸ™‹ğŸ¼â€â™‚ï¸</div>"
  ],
  questionI: [
    "You wanna play rough? Okay.",
    "Say hello to my little microcopy!"
  ],
  responseI: [
    ["What is UX writing?", "J"],
    ["Psychology relates to UX writing?", "K"]
  ],
  questionJ: [
    "<a href='#articles'>UX writing</a> may seem like a bit of a fad, but itâ€™s a critical part in designing products and making pixels pop ğŸ“²"
  ],
  questionK: [
    "Let's talk about UX, baby.",
    "Let's talk about you and <a href='#articles'>me</a> ğŸ’Ÿ"
  ],
  questionE: [
    "Meh? Didn't your Momma teach you any manners?",
    "Content is Queen. Letâ€™s serve her well. How you ask?",
    "Ignite minds. Warm hearts. Move Souls ğŸ˜",
    "Tell dope stories.",
    "Sweeter than dopamine ğŸ¤¤",
  ],
  responseE: [
    ["Sweet. I actually need some copy!", "L"],
    ["You live in Sydney, whatâ€™s it like?", "M"]
  ],
  questionL: [
    "<a href='#services'>Seek</a> and you shall find."
  ],
  responseL: [
    ["Your Services don't include what I need.", "P"],
    ["Can you write for my industry?", "Q"]
  ],
  questionP: [
    "No worries.",
    "You know I gotcha boo ğŸ‘ŒğŸ¼"
  ],
  questionQ: [
    "Yup.",
    "Unless your industry is finance or government â€“ ssnnnoooozze! ğŸ˜´"
  ],
  questionM: [
    "The energy in Sydney is electric!",
    "We celebrate in style with beers and fizz ğŸ¾"
  ],
  responseM: [
    ["Awesome! Let's get started.", "N"],
    ["Do you have any reviews?", "O"]
  ],
  questionN: [
    "I love your enthusiasm!",
    "Letâ€™s get busy.",
    " Enjoy the ride ğŸ––ğŸ¼</div>"
  ],
  questionO: [
    "Can you feel the <a href='#reviews'>love?</a> ğŸ¥°"
  ]
}

var luxury_transcript = {
  questionA: [
    'Welcome to Cortex Copywriter.',
    "The most authentic copywriting to grace screens of the digital age.",
    'Immerse yourself in expertly curated copy ğŸ–‹'
  ],
  responseA: [
    ['Keep chatting!', "B"],
    ["Get in touch!", "C"]
  ],
  questionB: [
    "Je m'appelle Nathan, the creator of this elegant experience âœğŸ¼",
    "A versatile writer whose exquisite talents range from copywriting to UX writing and neuroscience.",
    "My copywriting philosophy is based on a passion for <a href='#techniques'>psychology</a> and craftmanship that provides a balance of detail and simplicity.",
  ],
  responseB: [
    ["Are you really a former neuroscientist? ", "D"],
    ["Meh ğŸ˜‘ Why do I need a copywriter?", "E"]
  ],
  questionC: [
    "I hope you enjoy your journey through the universe of charming and opulent copy.",
    " Discover Cortex Copywriter ğŸ›"
  ],
  questionD: [
    "Absolutely. I was seduced by the mystery of the human mind. My copywriting is steeped in modern psychology and neuroscience.",
    "A passion for writing means I also excel at creative writing and screenwriting ğŸ“½"
  ],
  responseD: [
    ["Cool. Let's talk!", "F"],
    ["You write screenplays?", "G"]
  ],
  questionF: [
    "Our story will continue to evolve.",
    " Begin your story ğŸ“–</div>"
  ],
  questionG: [
    "The unparalleled artistry of my bespoke award-winning original TV pilot screenplay can be sampled <a href='#screenplays'>here</a>.",
  ],
  responseG: [
    ["Nice ğŸ‘ğŸ¼ What are your favorite TV shows?", "H"],
    ["Meh ğŸ˜‘ What else can you tell me?", "I"]
  ],
  questionH: [
    "I prefer classic cinema.",
    "To relax in a reclining armchair and enjoy waiter service at the theater.",
    "Will you join me? ğŸ¥‚"
  ],
  questionI: [
    "Are you not entertained? ğŸ’ƒğŸ¼",
    "Perhaps UX writing will pique your interest?"
  ],
  responseI: [
    ["What is UX writing?", "J"],
    ["Psychology relates to UX writing?", "K"]
  ],
  questionJ: [
    "UX writers use sleek words and refined details to hone clean, elegant <a href='#articles'>interfaces and experiences</a>."
  ],
  questionK: [
    "I take cues from classic Gestalt psychology ğŸ‘¨ğŸ¼â€ğŸ«",
    "Whether principles of reification or invariance, I unify visual elements like copy to guide users through a product interface â€“ consult my <a href='#articles'>Blog</a>."
  ],
  questionE: [
    "Steeped in classic grammatical art, my writing reflects the true essence of your brand ğŸ’",
    "I embrace a strong lexical style that results in a perfect blend of luxury and functionality.",
    "Influenced by innovative minimalist rhetoric that is cleverly applied to the satisfaction of your customers ğŸ’‹",
    "My words are a statement of sophisticated quality and bespoke elegance for digital screens and product interfaces.",
    "Imagine a pure pastel palette of silky syntax that penetrates the soul of your audience and entices them to action.",
  ],
  responseE: [
    ["Sweet. I actually need some copy!", "L"],
    ["You live in Sydney, whatâ€™s it like?", "M"]
  ],
  questionL: [
    "I promise to deliver ornate <a href='#services'>copy compositions</a> that are the very essence of understatement and good taste ğŸ©"
  ],
  responseL: [
    ["Your Services don't include what I need.", "P"],
    ["Can you write for my industry?", "Q"]
  ],
  questionP: [
    "I am a copywriting connoisseur.",
    "I will find practical solutions through versatility and inventiveness ğŸ‘¨ğŸ¼â€ğŸ¨</div>"
  ],
  questionQ: [
    "I combine fine workmanship with everyday functionality âœ’ï¸",
    "There is no subject I cannot <a href='#services'>master</a>."
  ],
  questionM: [
    "Chic and vibrant, Sydney is the finest, fanciest and most opulent setting ğŸŒƒ",
    "Itâ€™s elegant without being flashy, classy without compensating."
  ],
  responseM: [
    ["Awesome! Let's get started.", "N"],
    ["Do you have any reviews?", "O"]
  ],
  questionN: [
    "You are radiant, dazzling, and not shy about anything.",
    "Let us collaborate to create your ideal copy.",
    " Simplicity and sophistication never go out of style ğŸ’"
  ],
  questionO: [
    "Here is an eclectic mix of <a href='#reviews'>testimonials</a> from my precious clients."
  ]
}

var technology_transcript = {
  questionA: [
    'Hi, my cutting-edge conversational interface will guide you ğŸ¤–',
    "I programmed this interface with useful UX writing.",
    'Want to get in touch or keep chatting?'
  ],
  responseA: [
    ['Keep chatting!', "B"],
    ["Get in touch!", "C"]
  ],
  questionB: [
    "Thanks for picking my brain ğŸ˜„",
    "Prior to Cortex Copywriter, I was a neuroscientist who specialized in visual perception.",
    "Now I help SaaS companies simplify complex information into clear, concise <a href='#techniques'>language</a>.",
  ],
  responseB: [
    ["Are you really a former neuroscientist? ", "D"],
    ["Meh ğŸ˜‘ Why do I need a copywriter?", "E"]
  ],
  questionC: [
    "It is important for us to stay ahead of market strategies and technology.",
    " Letâ€™s make miracles happen ğŸ¦¸â€</div>"
  ],
  questionD: [
    "Sure. I can provide my University of Sydney psychology/neuroscience degrees and research if you'd like.",
    "After tiring of rigid academic writing, I pursued my passion â€“ copywriting, UX writing, and screenwriting ğŸ¤“"
  ],
  responseD: [
    ["Cool. Let's talk!", "F"],
    ["You write screenplays?", "G"]
  ],
  questionF: [
    "Letâ€™s get working on more efficiency. More quality.",
    " More economical copywriting solutions ğŸ¯"
  ],
  questionG: [
    "Agility and flexibility in writing allows me to construct award-winning <a href='#screenplays'>screenplays</a>.",
  ],
  responseG: [
    ["Nice ğŸ‘ğŸ¼ What are your favorite TV shows?", "H"],
    ["Meh ğŸ˜‘ What else can you tell me?", "I"]
  ],
  questionH: [
    "Anything on HBO.",
    "Let's discuss Westworld, Barry, and how I can help improve your customers' online experience.",
    "Shall we begin? ğŸ‰</div>"
  ],
  questionI: [
    "I can help you build better products through research, design and UX writing ğŸ“²",
    "My training in perceptual psychology helps me deliver a truly standout approach to data and UX writing."
  ],
  responseI: [
    ["What is UX writing?", "J"],
    ["Psychology relates to UX writing?", "K"]
  ],
  questionJ: [
    "<a href='#articles'>UX writers</a> conduct research, collaborate with design teams and apply UX practices to write copy for products and web experiences ğŸ’»"
  ],
  questionK: [
    "UX writers conduct user research to build a strong sense of empathy with a target audience.",
    "It's all about making sure the <a href='#articles'>user experience</a> is as smooth as possible âœ”ï¸"
  ],
  questionE: [
    "Copywriters understand your business objectives so they can write copy that connects with and converts customers.",
    "Professional copywriters lead the content design and development process for high growth companies ğŸ‘¨ğŸ½â€ğŸ’»",
    "They remain focused on business outcomes and delivering value to your clients.",
    "UX writers improve the user experience with helpful and useful language.",
    "Ultimately, copy makes or breaks the user experience.",
  ],
  responseE: [
    ["Sweet. I actually need some copy!", "L"],
    ["You live in Sydney, whatâ€™s it like?", "M"]
  ],
  questionL: [
    "Please see my <a href='#services'>Services</a> then get in touch for a free consultation."
  ],
  responseL: [
    ["Your Services don't include what I need.", "P"],
    ["Can you write for my industry?", "Q"]
  ],
  questionP: [
    "My Services list does not include the full breadth of my copywriting capabilities.",
    "I have a range of Services that can be augmented into your organization ğŸ‘¨ğŸ¼â€ğŸ”§"
  ],
  questionQ: [
    "Whether your business develops blockchain applications or self-driving cars...",
    "I can craft custom <a href='#services'>solutions</a> with your specific needs in mind."
  ],
  questionM: [
    "Sydney is the most livable capital city in Australia.",
    "Even though if falls well short of meeting public transport expectations ğŸ˜"
  ],
  responseM: [
    ["Awesome! Let's get started.", "N"],
    ["Do you have any reviews?", "O"]
  ],
  questionN: [
    "It seems like you have a clear vision.",
    "You have selected the best service provider for your project.",
    " Let's produce high quality deliverables with unprecedented speed to market ğŸ’ªğŸ¼</div>"
  ],
  questionO: [
    "Yes. I helped make these <a href='#reviews'>clientsâ€™</a> wishes come true."
  ]
}






// ********************* ANIMATE.CSS ********************************

$.fn.extend({
  animateCss: function(animationName, callback) {
    var animationEnd = (function(el) {
      var animations = {
        animation: 'animationend',
        OAnimation: 'oAnimationEnd',
        MozAnimation: 'mozAnimationEnd',
        WebkitAnimation: 'webkitAnimationEnd',
      };

      for (var t in animations) {
        if (el.style[t] !== undefined) {
          return animations[t];
        }
      }
    })(document.createElement('div'));

    this.addClass('animated ' + animationName).one(animationEnd, function() {
      $(this).removeClass('animated ' + animationName);

      if (typeof callback === 'function') callback();
    });

    return this;
  },
});



// ************** CHAT INTERFACE  **********************

var tl = new TimelineMax({});
var intro_tl = new TimelineMax({});
var msgnum = 1;
var replynum = 1;
var style_selected = "technology";


function animateText(q_obj, r_obj) {
  var starttime = 1;
  var questionarray = q_obj.nextquestion;
  var questiontag = q_obj.questiontag;
  var replyarray = r_obj.nextreply;
  var replytag = r_obj.replytag;
  var chatheight = 0;

  // DISABLE
  tl.add(TweenLite.to($(".style_swap"), 0.5, {
    opacity: 0.2,
    onComplete: disableCursor
  }));

  // HIDE REPLY CONTAINER
  tl.add(TweenLite.to($(".reply_container"), 0.5, {y: 50, opacity: 0} ) );

  var triggerContact = function(){
    openContactForm();
  }

  // QUESTIONS
  // if (questionarray != undefined || questionarray[0].length != 0) {
  // if (questionarray != undefined) {
    for (var i = 0; i < questionarray.length; i++) {
      var msgnumid = "msgnum" + msgnum;
      var msgnumhash = "#" + msgnumid;
      var g = $(`<div id="${msgnumid}" class="msg msg-q" data-questiontag="${questiontag}"/>`).text("...");
      var row = $('<div class="row" />').html(g).appendTo('.chat_container');
      tl.add(TweenLite.from(msgnumhash, 1, { x: -50, opacity: 0, ease: Power4.easeOut }));
      tl.add(TweenLite.to(msgnumhash, 0, { delay: 0.5, ease: Power4.easeOut }));
      var timenow = moment().format('h:mma');
      tl.set(msgnumhash, { text: `<span class="timestamp"> ${timenow} </span> <div class='chatbot-text'> ${questionarray[i]}</div>` });
      chatheight = $(".chat_container").prop('scrollHeight');
      msgnum++;
    }
    if (questiontag == "questionC" || questiontag == "questionF" || questiontag == "questionH" || questiontag == "questionP"  || questiontag == "questionN") {
      tl.add(TweenLite.from(g, 0, { delay: 1.5, onComplete: triggerContact }));
    }
  // }

  // DELAY
  // tl.add(TweenLite.from(g, 0, { delay: 0.1 }));

  // REMOVE DISABLE
  tl.add(TweenLite.to($(".style_swap"), 0.5, { opacity: 1, onComplete: enableCursor }));


  $(".reply_container").html("");
  // RESPONSES
  if (replyarray != undefined) {
    // Animate container in
    tl.add(TweenLite.fromTo($(".reply_container"), 0.8, {y: 0, opacity: 0, ease: Power4.easeOut}, {opacity: 1}, "-=0.6" ) );
    // Animate replies in
    for (var i = 0; i < replyarray[0].length; i++) {
      var g = $(`<div class="reply" data-replytag=${replytag} data-reply="${replyarray[i][0]}" data-nextresponse="${replyarray[i][1]}"/>`).text(replyarray[i][0]).appendTo('.reply_container');
      tl.add(TweenLite.from(g, 0.5, { y: 50, opacity: 0, ease: Power4.easeOut }));
      replynum++;
    }
    tl.play();
  }


}

var disableCursor = function() {
  $(".style_swap .button").css({
    "cursor": "not-allowed"
  });
}
var enableCursor = function() {
  $(".style_swap .button").css({
    "cursor": "pointer"
  });
}

function addReply(reply) {
  var replynumid = "replynum" + replynum;
  var replynumhash = "#" + replynumid;
  var g = $(`<div id="${replynumid}" class="msg msg-reply" />`).text("...");
  var row = $('<div class="row row-right" />').html(g).appendTo('.chat_container');
  tl.add(TweenLite.from(replynumhash, 0.6, { x: 50, opacity: 0, ease: Power4.easeOut }));
  var timenow = moment().format('h:mma');
  var replytext = `${reply} <span class="timestamp"> ${timenow} </span> `;

  tl.set(replynumhash, {
    text: replytext
  });
  tl.play();
}

// ******** REPLY CLICK **************

$(document).on("click", ".reply", function(event) {
  var thisreply = $(this).data("reply");
  var thisletter = $(this).data("nextresponse");
  var nextquestion = "question" + thisletter;
  var nextreply = "response" + thisletter;

  if (style_selected == "community") {
    var nextquestion_instyle = community_transcript[nextquestion];
    var nextreply_instyle = community_transcript[nextreply];
  }
  else if (style_selected == "corporate") {
    var nextquestion_instyle = corporate_transcript[nextquestion];
    var nextreply_instyle = corporate_transcript[nextreply];
  }
  else if (style_selected == "entertainment") {
    var nextquestion_instyle = entertainment_transcript[nextquestion];
    var nextreply_instyle = entertainment_transcript[nextreply];
  }
  else if (style_selected == "luxury") {
    var nextquestion_instyle = luxury_transcript[nextquestion];
    var nextreply_instyle = luxury_transcript[nextreply];
  }
  else if (style_selected == "technology") {
    var nextquestion_instyle = technology_transcript[nextquestion];
    var nextreply_instyle = technology_transcript[nextreply];
  }

  var q_obj = {
    questiontag: nextquestion,
    nextquestion: nextquestion_instyle
  }
  var r_obj = {
    replytag: nextreply,
    nextreply: nextreply_instyle
  }


  addReply(thisreply);
  animateText(q_obj, r_obj);

})


// ******** STYLE CLICK TO CHANGE STYLES **************

function switchChatbotStyleSelector(character){
  var thebox = $(`.button-style[data-swapstyle='${character}']`)
  // Remove
  $(".button-style").removeClass("style-swap-active");
  $(".button-style p").removeClass("style-swap-active");
  // Add
  thebox.addClass("style-swap-active");
  thebox.find("p").addClass("style-swap-active");
  thebox.animateCss('tada');

  style_selected = character;

  if (character == "community") {
    switchStyles(community_transcript);
  }
  else if (character == "corporate") {
    switchStyles(corporate_transcript);
  }
  else if (character == "entertainment") {
    switchStyles(entertainment_transcript);
  }
  else if (character == "luxury") {
    switchStyles(luxury_transcript);
  }
  else if (character == "technology") {
    switchStyles(technology_transcript);
  }
}


$(".button-style").on("click", function() {

  $(".button-style").removeClass("style-swap-active");
  $(this).addClass("style-swap-active");

  $(".button-style p").removeClass("style-swap-active");
  $(this).find("p").addClass("style-swap-active");
  $(this).animateCss('tada');

  // FIND THE STYLE
  style_selected = $(this).data("swapstyle");
  // showEntryMessage(style_selected);

  if (style_selected == "community") {
    switchStyles(community_transcript);
  }
  else if (style_selected == "corporate") {
    switchStyles(corporate_transcript);
  }
  else if (style_selected == "entertainment") {
    switchStyles(entertainment_transcript);
  }
  else if (style_selected == "luxury") {
    switchStyles(luxury_transcript);
  }
  else if (style_selected == "technology") {
    switchStyles(technology_transcript);
  }

});

function switchStyles(transcript){

  var temparray = [];
  var uniquequestions = [];
  for (i = 0; i < $(".msg-q").length; i++) {
    var questionname = $(".msg-q").eq(i).data("questiontag");
    temparray.push(questionname);
  }
  makeNewArrayWithOnlyUniques(temparray, uniquequestions);
  for (var i = 0; i < uniquequestions.length; i++) {
    var totalcount = 0;
    var text = transcript[uniquequestions[i]];
    var newlistofq = [];
    for (var k = 0; k < $(".msg-q").length; k++) {
      if ($(".msg-q").eq(k).data("questiontag") == uniquequestions[i]) {
        newlistofq.push($(".msg-q").eq(k));
      }
    }
    var timenow = moment().format('h:mma');
    var timestamp = `<span class="timestamp"> ${timenow} </span> `;
    for (var j = 0; j < newlistofq.length; j++) {
      newlistofq[j].html(`<div class='chatbot-text'> ${transcript[uniquequestions[i]][j]}</div>`)
    }
  }
  $(".msg-q").prepend(timestamp);
}


// ***************** COMMON FUNCTIONS ***********************

function onlyUnique(value, index, self) {
  return self.indexOf(value) === index;
}

function arrayContains(needle, arrhaystack) {
  return (arrhaystack.indexOf(needle) > -1);
}

function removeArrayElement(element, array) {
  var index = array.indexOf(element);
  if (index > -1) {
    array.splice(index, 1);
  }
}

function makeNewArrayWithOnlyUniques(oldarray, newarray) {
  $.each(oldarray, function(i, el) {
    if ($.inArray(el, newarray) === -1) newarray.push(el);
  });
}





// ***************** INITIAL DEFAULT MESSAGE ***********************
function showEntryMessage(character){
  var timenow = moment().format('h:mma');
  var timestamp = `<span class="timestamp"> ${timenow} </span> `;
  $(".chat_container .entry_chat_message").html(`You begun chatting with the "${character}" writing style of the Cortex Copywriter at ${timestamp}. Have fun!`);
}

// showEntryMessage("community");


// ***************** LETS GET HER GOIN AY ***********************

// var q_obj = {
//   questiontag: "questionA",
//   nextquestion: technology_transcript["questionA"]
// }
// var r_obj = {
//   replytag: "responseA",
//   nextreply: technology_transcript["responseA"]
// }
//
//   animateText(q_obj, r_obj);

function restartChat(){
  // console.log("restarting");
  TweenMax.killAll();
  // Clear out
  $(".chat_container").html(`<div class="chatbot_restart">Restart <i class="fas fa-undo"></i></div>`);
  // Reset Style
  switchChatbotStyleSelector("technology");
  // Prepare correct questions
  var q_obj = {
    questiontag: "questionA",
    nextquestion: technology_transcript["questionA"]
  }
  var r_obj = {
    replytag: "responseA",
    nextreply: technology_transcript["responseA"]
  }
  // Animate them in
  animateText(q_obj, r_obj);
}

restartChat();

$(document).on("click",".chatbot_restart", function(){
  restartChat("technology");
});












// COMMENT
